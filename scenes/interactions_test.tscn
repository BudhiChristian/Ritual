[gd_scene load_steps=11 format=3 uid="uid://di8viifxj7dh6"]

[ext_resource type="PackedScene" uid="uid://dajucj1rg5jlu" path="res://prefabs/tool_handle/tool_handle.tscn" id="1_lkw5s"]
[ext_resource type="Script" path="res://scripts/state_management/state_machine.gd" id="1_rstyf"]
[ext_resource type="Script" path="res://scripts/state_management/pin_state.gd" id="2_5vang"]
[ext_resource type="Texture2D" uid="uid://igggnfhpwe22" path="res://textures/needle.png" id="2_a4dei"]
[ext_resource type="PackedScene" uid="uid://njrrapejymsx" path="res://prefabs/pin/pin.tscn" id="3_k7ahx"]
[ext_resource type="Texture2D" uid="uid://ci3hwhklre8j" path="res://textures/soul jar.png" id="4_5anud"]
[ext_resource type="Texture2D" uid="uid://cv182d1q15aby" path="res://textures/knife.png" id="6_5lsyk"]
[ext_resource type="PackedScene" uid="uid://bn4m5kpawwy8m" path="res://prefabs/spirit/spirit.tscn" id="6_i004f"]
[ext_resource type="Texture2D" uid="uid://bdw6fqxsfhl81" path="res://textures/thurible.png" id="7_0q1gh"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_hr5hb"]
size = Vector2(996, 653)

[node name="interactions_test" type="Node2D"]

[node name="tools_state" type="Node2D" parent="." node_paths=PackedStringArray("current_state", "interaction_area")]
script = ExtResource("1_rstyf")
current_state = NodePath("blue_pin_state")
interaction_area = NodePath("../Area2d")

[node name="blue_pin_state" type="Node2D" parent="tools_state"]
script = ExtResource("2_5vang")
state_name = "blue"
pin_prefab = ExtResource("3_k7ahx")
pin_color = Color(0.196078, 0.223529, 1, 1)

[node name="red_pin_state" type="Node2D" parent="tools_state"]
script = ExtResource("2_5vang")
state_name = "red"
pin_prefab = ExtResource("3_k7ahx")
pin_color = Color(0.901961, 0.321569, 0.180392, 1)

[node name="soul_jar" type="Sprite2D" parent="."]
position = Vector2(88, 43)
scale = Vector2(0.5, 0.5)
texture = ExtResource("4_5anud")

[node name="knife_handle" parent="." node_paths=PackedStringArray("_associated_state") instance=ExtResource("1_lkw5s")]
position = Vector2(-2, 172)
_tool_texture = ExtResource("6_5lsyk")
_tool_color = Color(0.290196, 0, 0.160784, 1)
_tool_scale = Vector2(0.7, 0.7)
_associated_state = NodePath("../tools_state/blue_pin_state")

[node name="thurible_handle" parent="." node_paths=PackedStringArray("_associated_state") instance=ExtResource("1_lkw5s")]
position = Vector2(-2, 306)
_tool_texture = ExtResource("7_0q1gh")
_tool_color = Color(0.290196, 0, 0.160784, 1)
_tool_scale = Vector2(0.7, 0.7)
_associated_state = NodePath("../tools_state/blue_pin_state")

[node name="blue_pin_handle" parent="." node_paths=PackedStringArray("_associated_state") instance=ExtResource("1_lkw5s")]
position = Vector2(-2, 439)
_tool_texture = ExtResource("2_a4dei")
_tool_color = Color(0.196078, 0.223529, 1, 1)
_tool_scale = Vector2(0.7, 0.7)
_associated_state = NodePath("../tools_state/blue_pin_state")

[node name="red_pin_handle" parent="." node_paths=PackedStringArray("_associated_state") instance=ExtResource("1_lkw5s")]
position = Vector2(0, 573)
_tool_texture = ExtResource("2_a4dei")
_tool_color = Color(0.901961, 0.321569, 0.180392, 1)
_tool_scale = Vector2(0.7, 0.7)
_associated_state = NodePath("../tools_state/red_pin_state")

[node name="Area2d" type="Area2D" parent="."]
position = Vector2(144, 6)

[node name="CollisionShape2d" type="CollisionShape2D" parent="Area2d"]
position = Vector2(509, 319.5)
shape = SubResource("RectangleShape2D_hr5hb")

[node name="spirit2" parent="." instance=ExtResource("6_i004f")]
position = Vector2(521, 377)

[node name="spirit" parent="." instance=ExtResource("6_i004f")]
position = Vector2(943, 153)

[connection signal="input_event" from="Area2d" to="tools_state" method="_on_interaction_area_input"]
